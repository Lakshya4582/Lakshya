<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/myticket.css">
</head>
<body>
    <header>
        <div class="container">
            <section class="logo">
                <strong><a href="index.html">Lakshya</a></strong>
                <span class="red-dot"></span>
                <span>Present</span> 
            </section>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About us</a></li>
                    <li><a href="login.html">Login</a></li>
                    <li><a href="">Contact us</a></li>
                </ul>
            </nav>
            
        </div>
    </header>


    <h1>My Booked Tickets</h1>
  <form>
    <label for="email">Enter your email address:</label>
    <input type="email" id="email" name="email">
    <button type="submit">Show My Tickets</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>From</th>
        <th>To</th>
        <th>Date</th>
        <th>Gender</th>
        <th>Seat Number</th>
      </tr>
    </thead>
    <tbody id="ticket-list">
    </tbody>
  </table>

  <script>
    const form = document.querySelector('form');
    const ticketList = document.querySelector('#ticket-list');

    form.addEventListener('submit', function(event) {
      event.preventDefault();

      const email = document.getElementById('email').value;

      // retrieve tickets from local storage and filter based on email
      const tickets = JSON.parse(localStorage.getItem('ticket')) || [];
      const myTickets = tickets.filter(ticket => ticket.email === email);

      // clear ticket list before adding new tickets
      ticketList.innerHTML = '';

      // display each ticket in the table
      myTickets.forEach(ticket => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${ticket.name}</td>
          <td>${ticket.email}</td>
          <td>${ticket.phone}</td>
          <td>${ticket.from}</td>
          <td>${ticket.to}</td>
          <td>${ticket.date}</td>
          <td>${ticket.gender}</td>
          <td>${ticket.seatNumber}</td>
        `;
        ticketList.appendChild(row);
      });
    });
  </script>
</body>
</html>